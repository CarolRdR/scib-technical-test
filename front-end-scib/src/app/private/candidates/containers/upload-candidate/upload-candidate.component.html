<div class="candidates-layout">
  <mat-card class="upload-card">
    <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="upload-form">
      <h2>{{ 'UPLOAD_CANDIDATE.TITLE' | translate }}</h2>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'UPLOAD_CANDIDATE.FIELDS.NAME_LABEL' | translate }}</mat-label>
        <input
          matInput
          formControlName="name"
          [placeholder]="'UPLOAD_CANDIDATE.FIELDS.NAME_PLACEHOLDER' | translate"
        />
        @if (uploadForm.controls.name.hasError('required')) {
          <mat-error>{{ 'UPLOAD_CANDIDATE.FIELDS.NAME_REQUIRED' | translate }}</mat-error>
        }
        @if (uploadForm.controls.name.hasError('maxlength')) {
          <mat-error>{{ 'UPLOAD_CANDIDATE.FIELDS.NAME_MAX' | translate }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'UPLOAD_CANDIDATE.FIELDS.SURNAME_LABEL' | translate }}</mat-label>
        <input
          matInput
          formControlName="surname"
          [placeholder]="'UPLOAD_CANDIDATE.FIELDS.SURNAME_PLACEHOLDER' | translate"
        />
        @if (uploadForm.controls.surname.hasError('required')) {
          <mat-error>{{ 'UPLOAD_CANDIDATE.FIELDS.SURNAME_REQUIRED' | translate }}</mat-error>
        }
        @if (uploadForm.controls.surname.hasError('maxlength')) {
          <mat-error>{{ 'UPLOAD_CANDIDATE.FIELDS.SURNAME_MAX' | translate }}</mat-error>
        }
      </mat-form-field>

      <!-- Dropzone -->
      <app-drop-files-zone [control]="uploadForm.controls.file" />

      <button mat-flat-button color="primary" type="submit" [disabled]="isSubmitting()">
        {{
          isSubmitting()
            ? ('UPLOAD_CANDIDATE.ACTIONS.LOADING' | translate)
            : ('UPLOAD_CANDIDATE.ACTIONS.SUBMIT' | translate)
        }}
      </button>

      @if (isSubmitting()) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      }
    </form>
  </mat-card>

  <app-candidate-table />
</div>
