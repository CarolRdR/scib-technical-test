<mat-card class="upload-card">
  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="upload-form">
    <h2>Cargar candidato</h2>

    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="name" placeholder="Ej: Ana" />
      <mat-error *ngIf="uploadForm.controls.name.hasError('required')">Campo obligatorio</mat-error>
      <mat-error *ngIf="uploadForm.controls.name.hasError('maxlength')">
        Máximo 80 caracteres
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="surname" placeholder="Ej: García" />
      <mat-error *ngIf="uploadForm.controls.surname.hasError('required')">
        Campo obligatorio
      </mat-error>
      <mat-error *ngIf="uploadForm.controls.surname.hasError('maxlength')">
        Máximo 80 caracteres
      </mat-error>
    </mat-form-field>

    <div class="file-field">
      <input
        #fileInput
        type="file"
        accept=".xlsx"
        (change)="onFileChange($event)"
        class="visually-hidden"
      />
      <button type="button" mat-stroked-button color="primary" (click)="fileInput.click()">
        Seleccionar Excel
      </button>
      <span class="file-name" [class.placeholder]="!selectedFileName">
        {{ selectedFileName || 'Ningún archivo seleccionado' }}
      </span>
    </div>
    <mat-error *ngIf="uploadForm.controls.file.hasError('required')">Adjunta un archivo.</mat-error>

    <button mat-flat-button color="primary" type="submit" [disabled]="isSubmitting()">
      {{ isSubmitting() ? 'Cargando...' : 'Enviar' }}
    </button>

    <mat-progress-bar *ngIf="isSubmitting()" mode="indeterminate"></mat-progress-bar>
  </form>
</mat-card>
